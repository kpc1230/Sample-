<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs
    title="Test sessions"
    author="Atlassian"
    thumbnail='#staticResourceUrl("com.atlassian.bonfire.plugin:bonfire-test-sessions-gadget", "images/gadgets/bonfire-sessions-screenshot.jpg")'
    description="View a list of test sessions">
        <Optional feature='auth-refresh' />
        <Require feature="oauthpopup"/>
        <Require feature="views"/>
        <Require  feature="dynamic-height"/>
        <Require feature="setprefs"/>
        #oauth
        #supportedLocales("gadget.common")
        <Optional feature="gadget-directory">
            <Param name="categories">
                JIRA
                Testing
            </Param>
        </Optional>
    </ModulePrefs>
    <UserPref name="refresh" datatype="hidden" default_value="false" />
    <UserPref name="isConfigured" datatype="hidden" default_value="false"/>
    <UserPref name="bonfire-user-filter" datatype="hidden"/>
    <UserPref name="bonfire-project-filter" datatype="hidden"/>
    <UserPref name="bonfire-status-filter" datatype="hidden"/>
    <Content type="html"><![CDATA[
        #requireResource("com.atlassian.jira.gadgets:common-lite")
        #requireResource("com.atlassian.bonfire.plugin:bonfire-gadget-common")
        #requireResource("com.atlassian.bonfire.plugin:bonfire-gadget-test-session")
        #includeResources()

        <script type="text/javascript">
		    (function () {
                var gadget = AJS.Gadget({
                    baseUrl: "__ATLASSIAN_BASE_URL__",
                    useOauth: "/rest/gadget/1.0/currentUser",
                    config: {
                        descriptor: function (args)
                        {
                            return GADGET.descriptor(this, args, "__ATLASSIAN_BASE_URL__");
                        },
                        args: GADGET.descriptorArgs("__ATLASSIAN_BASE_URL__")
                    },
                    view: {
                        enableReload: true,
                        onResizeReload: true,
                        onResizeAdjustHeight: true,
                        template: function (args)
                        {
                            return GADGET.template(this, args, "__ATLASSIAN_BASE_URL__");
                        },
                        args: GADGET.templateArgs("__ATLASSIAN_BASE_URL__")
                    }
                });
            })();
        </script>
  ]]></Content>
</Module>


